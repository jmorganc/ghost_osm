import sys

import ghost
import osm


def main():
    """
    1. Authenticate to Ghost
    2. Get latest post with tag "ghost_osm"
    3. Scrape OSM for edits with a date great than that post
    4. Post them to Ghost
    """
    ghost.authenticate()

    #osm_posts =  osm.get_posts()
    #osm_posts = [{'description': u'Added park entry trail and parking lot.', 'created': '2014-09-29T05:10:23.000Z'}, {'description': u'Added parking lot and service road to the slipway.', 'created': '2014-09-25T20:55:24.000Z'}, {'description': u'Added slipway to the Colorado river.', 'created': '2014-09-25T20:49:58.000Z'}, {'description': u'Added the name for the water tower on Lockwood Drive.', 'created': '2014-09-19T20:59:31.000Z'}, {'description': u'Added sidewalk.', 'created': '2014-07-29T20:52:45.000Z'}, {'description': u'Moved Kingwood First Baptist Church to the proper side of the road.', 'created': '2014-07-24T21:02:08.000Z'}, {'description': u'Creekwood Middle School bicycle parking.', 'created': '2014-07-24T20:57:08.000Z'}, {'description': u'Mill Creek Resort and Marina.', 'created': '2014-07-24T20:35:41.000Z'}, {'description': u'Mill Creek Marina car parking.', 'created': '2014-07-24T20:34:17.000Z'}, {'description': u'Mill Creek Marina breakwater.', 'created': '2014-07-24T20:33:23.000Z'}, {'description': u'Seafari is now Isle of Skye Leather Shop on the Armadale pier.', 'created': '2014-05-26T11:07:36.000Z'}, {'description': u'Removed cafe point and added building for MacLeod Tables Cafe.', 'created': '2014-05-26T11:04:33.000Z'}, {'description': u'Added a note to the forest at the base of the Storr indicating it has recently been felled.', 'created': '2014-05-26T10:53:52.000Z'}, {'description': u'Added Glencairn and Ardross Guest Houses in Inverness.', 'created': '2014-05-26T10:48:06.000Z'}, {'description': u'(no comment)', 'created': '2014-05-14T00:23:42.000Z'}, {'description': u'(no comment)', 'created': '2014-05-14T00:11:19.000Z'}, {'description': u'Casa Chameleon.', 'created': '2014-05-13T23:56:06.000Z'}, {'description': u'Extended Cabo Blanco trail down to the beach.', 'created': '2014-05-13T23:53:34.000Z'}, {'description': u'(no comment)', 'created': '2014-05-13T23:48:58.000Z'}, {'description': u'Forest Chapel church building, parking lot and service road.', 'created': '2014-05-13T23:37:16.000Z'}, {'description': u'Added Chicota VFD', 'created': '2014-05-13T23:32:42.000Z'}, {'description': u'Fixed road and added gate in Sugar Hill neighborhood.', 'created': '2014-05-13T23:29:50.000Z'}, {'description': u'Fixed roads near River Grove Park. Added slipway.', 'created': '2014-05-07T01:05:11.000Z'}, {'description': u'Water tower.', 'created': '2014-05-06T15:24:21.000Z'}, {'description': u'Kingwood High School.', 'created': '2014-05-06T00:46:31.000Z'}, {'description': u'Creekwood Middle School.', 'created': '2014-05-06T00:26:35.000Z'}, {'description': u'Added entrance node from footpath.', 'created': '2014-05-06T00:09:49.000Z'}, {'description': u'Added capacity tag and website.', 'created': '2014-05-06T00:06:59.000Z'}, {'description': u'Richardson Heights Elementary school grounds.', 'created': '2014-05-06T00:04:31.000Z'}, {'description': u'Heights recreation areas.', 'created': '2014-05-03T18:35:32.000Z'}, {'description': u'Footpaths and alleys.', 'created': '2014-05-03T18:21:04.000Z'}, {'description': u'Footpaths and fences around Richardson Heights Elementary.', 'created': '2014-05-03T18:12:42.000Z'}, {'description': u'Added baseball diamonds, parking, and paths.', 'created': '2014-05-03T18:02:47.000Z'}, {'description': u'Added foot paths to dog parks and fences around them.', 'created': '2014-05-03T17:58:48.000Z'}, {'description': u'Added Plano large and small dog parks.', 'created': '2014-05-03T17:56:34.000Z'}, {'description': u'Connected parking aisles to street.', 'created': '2014-05-03T17:49:57.000Z'}, {'description': u'Footpath.', 'created': '2014-05-02T18:46:09.000Z'}, {'description': u'Fence.', 'created': '2014-05-02T18:44:53.000Z'}, {'description': u'Footpaths.', 'created': '2014-05-02T18:41:44.000Z'}, {'description': u'Added a point for Alamo Drafthouse.', 'created': '2014-05-02T15:49:51.000Z'}, {'description': u'Added Fossil, Inc.', 'created': '2014-05-02T15:46:24.000Z'}, {'description': u'Added Fossil, Inc.', 'created': '2014-05-02T15:42:03.000Z'}, {'description': u'Parking, trails and parking aisles.', 'created': '2014-05-02T15:25:04.000Z'}, {'description': u'Moved part of a GPS trace to closer follow the path. Added path around parking lot. Added parking and parking lanes.', 'created': '2014-05-02T15:12:10.000Z'}, {'description': u'Put the church marker on the church and then made the cemetery area.', 'created': '2014-05-01T18:58:18.000Z'}, {'description': u'Added highway=raceway to the track and sport=karting to the area, then set area=no advised by this comment thread: https://help.openstreetmap.org/questions/1984/how-do-you-tag-a-kart-racing-track', 'created': '2014-05-01T13:49:59.000Z'}, {'description': u'Added Dallas Karting complex parking, building, and track.', 'created': '2014-05-01T13:44:02.000Z'}, {'description': u"Didn't mean to edit number of lanes last time...", 'created': '2014-04-30T21:20:25.000Z'}, {'description': u'Added cyclelane tag to Waterview.', 'created': '2014-04-30T21:18:33.000Z'}, {'description': u'Footpaths.', 'created': '2014-04-30T20:41:29.000Z'}, {'description': u'Heights Park. Parking and footpaths.', 'created': '2014-04-30T20:39:55.000Z'}, {'description': u'Renamed "Richardson Heights School" to "Richardson Heights Elementary School"', 'created': '2014-04-30T20:17:52.000Z'}, {'description': u'Heights Park Elementary playgrounds.', 'created': '2014-04-30T20:15:24.000Z'}, {'description': u'Heights Park playground.', 'created': '2014-04-30T20:12:32.000Z'}, {'description': u'Added tennis courts, baseball fields, and perimeter sidewalk.', 'created': '2014-04-30T20:10:58.000Z'}, {'description': u'Outlined Richardson Heights Elementary building.', 'created': '2014-04-30T19:52:00.000Z'}, {'description': u'Added roads and alley around Richardson Heights Elementary.', 'created': '2014-04-29T19:59:45.000Z'}, {'description': u'Changed direction of paths to go into the building.', 'created': '2014-04-29T19:44:34.000Z'}, {'description': u'Added walking paths and entrances to the SW side of Discovery Park.', 'created': '2014-04-29T19:41:13.000Z'}, {'description': u'(no comment)', 'created': '2014-04-29T19:26:32.000Z'}]
    osm_posts = [{'description': u'This is a test.', 'created': '2014-09-28T05:10:23.000Z'}]

    ghost.post(osm_posts)


sys.exit(main())
